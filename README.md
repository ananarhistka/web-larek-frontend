# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Базовый код

## Об архитектуре 

Взаимодействия внутри приложения происходят через события. Модели инициализируют события, слушатели событий в основном коде выполняют передачу данных компонентам отображения, а также вычислениями между этой передачей, и еще они меняют значения в моделях.
м

## 1-Класс Api

Класс Api представляет собой базовый класс для работы с API сервера. Он содержит следующие поля, методы и сеттеры:

Поля:
```ts
1. baseUrl: string - используемый домен сервера.
2. options: RequestInit - параметры запроса.

Методы:
1. constructor(baseUrl: string, options: RequestInit = {}) - конструктор класса, принимает базовый URL сервера и параметры запроса.
2. handleResponse(response: Response) - обрабатывает ответ сервера и возвращает либо полученные данные JSON, либо сообщение об ошибке.
3. get(uri: string) - реализация метода GET для выполнения запроса на получение данных с сервера.
4. post(uri: string, data: object, method: ApiPostMethods = 'POST') - реализация метода POST для передачи данных на сервер.
```
Все методы выполняют запросы с использованием fetch API и обрабатывают ответы сервера. Класс Api обеспечивает возможность выполнения запросов GET и POST к API сервера, а также обработку ответов сервера для получения данных или сообщений об ошибках.

## 2-Component

Базовый класс представляет собой абстрактный компонент, который может использоваться для создания других компонентов на веб-странице. Он содержит методы для управления различными аспектами DOM-элементов, такие как переключение классов, установка текстового содержимого, изменение статуса блокировки, скрытие и показ элементов, установка изображений

## 3-EventEmitter

EventEmitter класс, который представляет собой реализацию брокера событий с возможностью подписки на события, отписки от событий и генерации событий.

Класс представляет собой методы для установки обработчика на событие (on), инициирования события с данными (emit), слушания всех событий (onAll), сброса всех обработчиков (offAll) и создания триггера для генерации события при вызове (trigger).

## 4-Model

Базовый класс Model представляет собой абстрактную модель, которая используется для хранения данных и уведомления об изменениях. Конструктор класса принимает частичные данные типа T и объект событий IEvents.

Метод emitChanges используется для сообщения об изменениях в модели.

## Компоненты модели данных (бизнес-логика)

## 1-MainPage

Класс MainPage описывает состояние приложения и содержит методы для работы с каталогом товаров, корзиной покупок, заказом и предварительным просмотром товара.

Свойство directory содержит массив лотов, свойство orderProducr содержит информацию о заказе, а preview - предпросмотр лота.

## 2-CartProduct

Класс CartProduct описывает отдельный лот товара.

В классе CartProduct определены следующие свойства:

- id: идентификатор лота;
- name: название лота;
- price: цена лота;
- description: описание лота;
- image: изображение лота;

## 3-CartItem

Класс CartItem представляет собой модель заказа, содержит описание карточек.

## Компоненты представления

## 1 Cart

Cart:
Представляет информацию о содержимом корзины.

 Свойства:
  - products: массив продуктов типа CartProduct.
  - totalPrice: общая стоимость продуктов в корзине.

## 2 DeliveryAddress

DeliveryAddress:
Предоставляет информацию об адресе доставки и методе оплаты.

 Свойства:
  - address: адрес доставки (строка или число).
  - payment: метод оплаты типа PaymentMethod.

## 3 MakingAnOrder

MakingAnOrder:
Предоставляет информацию для выполнения заказа.

 Свойства:
  - email: адрес электронной почты заказчика.
  - phone: номер телефона заказчика.

## Ключевые типы данных
//карточки на главной странице
interface Product {
  - products: CartProduct[];//описание карточек
  - category: LotSection;//категории
}

```ts

//описание карточки 
interface CartProduct {
   id: number;//id карточки
   name: string;//имя карточки
   price: number;//цена карточки 
   description: string;//описание 
   image: string;//путь к изображению
}

interface MainPage {
   cart: CartItem[]; //выбранные продукты в корзине
   preview: CartItem; //просмотр продукта
   directory: CartItem[]; //все категории
   orderProducr: Cart;//отслеживание продуктов в корзине
}
```

```ts
//все события на сайте
enum Events {
      CATALOG_PRODUCTS = "product:changed", //все категории карточек
      HOVER_PRODUCTS = "product:hover",//навели на карточку
      CLICK_PRODUCTS = "card:open", //кликнули по карточке
      OPEN_MODAL = "modal:open", //при клике на карточку открывается модальное окно
      CLOSE_MODAL = "modal:close",//приклике на креситк закрывется модальное окно
      ADD_CART = "cart:changed",//добавить продукт в корзину
      OPEN_CART = "cart:open",//открыти корзины
      DELETE_PRODUCT = "product:remove"//удаление продукта из корзины
      MAKING_AN_ORDER = "making-order:open"//переход к оформлению заказа
      PAYMENT_METHOD = "payment:changed"//способ оплаты
      FILLING_IN_FIELDS_WHITH_DATE = "data-field:changed"//заполняем поля данными 
      ORDER_COMPLETION = "order-completion:post"//заказ оформлен
}
```